{% comment %}
  Renders share button.
  Accepts:
  - block: {Object} passes in the block information.
  - share_link: {String} url to be added to the input the user will get/copy.

  Usage:
  {% render 'share-button',
    block: block,
    share_link: share_url
  %}
{% endcomment %}
<script src="{{ 'share.js' | asset_url }}" defer="defer"></script>

<share-button id="Share-{{ section.id }}" class="share-button quick-add-hidden" {{ block.shopify_attributes }}>
  <button class="share-button__button hidden">
    {% render 'icon-share' %}
    {{ block.settings.share_label | escape }}
  </button>
  <details id="Details-{{ block.id }}-{{ section.id }}">
    <summary class="share-button__button">
      {% render 'icon-share' %}
      {{ block.settings.share_label | escape }}
    </summary>
    <div class="share-button__fallback motion-reduce">
      <div class="social-sharing">
        <a target="_blank" href="https://www.facebook.com/sharer.php?u={{ share_link | url_encode }}" class="share-facebook" title="{{ 'general.social.share_on_facebook' | t }}">
          <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-facebook" viewBox="0 0 18 18">
            <path fill="currentColor" d="M16.42.61c.27 0 .5.1.69.28.19.2.28.42.28.7v15.44c0 .27-.1.5-.28.69a.94.94 0 01-.7.28h-4.39v-6.7h2.25l.31-2.65h-2.56v-1.7c0-.4.1-.72.28-.93.18-.2.5-.32 1-.32h1.37V3.35c-.6-.06-1.27-.1-2.01-.1-1.01 0-1.83.3-2.45.9-.62.6-.93 1.44-.93 2.53v1.97H7.04v2.65h2.24V18H.98c-.28 0-.5-.1-.7-.28a.94.94 0 01-.28-.7V1.59c0-.27.1-.5.28-.69a.94.94 0 01.7-.28h15.44z">
          </svg>
          <span class="share-title">Facebook</span>
        </a>
        
        <a target="_blank" href="https://twitter.com/share?text={{ product.title | url_encode }}&url={{ share_link | url_encode }}" class="share-twitter" title="{{ 'general.social.share_on_twitter' | t }}">
          <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-twitter" viewBox="0 0 18 15">
            <path fill="currentColor" d="M17.64 2.6a7.33 7.33 0 01-1.75 1.82c0 .05 0 .13.02.23l.02.23a9.97 9.97 0 01-1.69 5.54c-.57.85-1.24 1.62-2.02 2.28a9.09 9.09 0 01-2.82 1.6 10.23 10.23 0 01-8.9-.98c.34.02.61.04.83.04 1.64 0 3.1-.5 4.38-1.5a3.6 3.6 0 01-3.3-2.45A2.91 2.91 0 004 9.35a3.8 3.8 0 01-2.6-1.33A3.8 3.8 0 01.5 5.03c.5.15 1.07.2 1.66.2a3.45 3.45 0 01-1.67-3 3.49 3.49 0 01.47-1.77c1.8 2.22 4.03 3.37 6.73 3.43-.02-.19-.03-.35-.03-.52a3.4 3.4 0 011-2.47 3.4 3.4 0 012.49-1.02c.8 0 1.53.3 2.11.87a6.68 6.68 0 012.17-.82c-.27.84-.76 1.5-1.47 2.01.71-.12 1.48-.31 2.3-.62z">
          </svg>
          <span class="share-title">Twitter</span>
        </a>
        
        <a target="_blank" href="https://pinterest.com/pin/create/button/?url={{ share_link | url_encode }}&media={{ product.featured_media.src | img_url: '1024x' | prepend: 'https:' | url_encode }}&description={{ product.title | url_encode }}" class="share-pinterest" title="{{ 'general.social.share_on_pinterest' | t }}">
          <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-pinterest" viewBox="0 0 17 18">
            <path fill="currentColor" d="M8.48.58a8.42 8.42 0 015.9 2.45 8.42 8.42 0 011.33 10.08 8.28 8.28 0 01-7.23 4.16 8.5 8.5 0 01-2.37-.32c.42-.68.7-1.29.85-1.8l.59-2.29c.14.28.41.52.8.73.4.2.8.31 1.24.31.87 0 1.65-.25 2.34-.75a4.87 4.87 0 001.6-1.98c.38-.85.57-1.8.57-2.85a5.23 5.23 0 00-1.33-3.7c-.88-.92-2.23-1.4-4.06-1.4-1.3 0-2.47.26-3.5.78-.96.51-1.7 1.17-2.23 2-.54.8-.81 1.7-.81 2.7 0 .6.08 1.17.25 1.7.17.52.38.96.63 1.3.25.33.36.67.36 1.02 0 .15-.03.31-.1.48a.9.9 0 01-.26.37.7.7 0 01-.4.15c-.38 0-.74-.35-1.1-1.05-.36-.7-.54-1.7-.54-3.01 0-1.29.32-2.46.97-3.5a7.55 7.55 0 012.86-2.63c1.26-.66 2.73-1 4.42-1z">
          </svg>
          <span class="share-title">Pinterest</span>
        </a>
        
        <a target="_blank" href="https://wa.me/?text={{ share_link | url_encode }}" class="share-whatsapp" title="{{ 'general.social.share_on_whatsapp' | t }}">
          <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-whatsapp" viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.4 3.6C18.2 1.3 15.2 0 12 0S5.8 1.3 3.6 3.6C1.3 5.8 0 8.8 0 12c0 2.2.6 4.3 1.7 6.1L0 24l6-1.6c1.8 1 3.8 1.5 5.9 1.5 3.2 0 6.2-1.3 8.4-3.6 2.3-2.2 3.6-5.2 3.6-8.4.1-3.2-1.2-6.2-3.5-8.3zm-8.4 19c-1.8 0-3.5-.5-5-1.4l-.4-.2-3.5 1 .9-3.4-.2-.4c-1-1.6-1.5-3.4-1.5-5.2 0-2.6 1-5 2.9-6.8 1.8-1.9 4.3-2.9 6.8-2.9 2.6 0 5 1 6.8 2.9 1.9 1.8 2.9 4.3 2.9 6.8 0 2.6-1 5-2.9 6.8-1.7 1.9-4.1 2.8-6.8 2.8zm4-5.1c-.3-.1-1.6-.8-1.9-.9-.3-.1-.5-.1-.7.1-.2.3-.8.9-.9 1-.2.2-.3.2-.6 0-.3-.1-1.2-.4-2.2-1.4-.8-.7-1.4-1.6-1.5-1.9-.2-.3 0-.4.1-.5.1-.2.3-.4.4-.5.1-.2.2-.3.3-.5 0-.2 0-.4-.1-.5-.1-.1-.7-1.6-1-2.2-.2-.6-.5-.5-.7-.5h-.6c-.2 0-.5.1-.8.4-.3.3-1 1-1 2.4s1 2.8 1.2 3c.1.2 2 3 4.8 4.2.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.5-.1 1.6-.7 1.9-1.3.2-.6.2-1.2.2-1.3-.1-.3-.3-.4-.6-.5z"/>
          </svg>
          <span class="share-title">WhatsApp</span>
        </a>
        
        <a target="_blank" href="mailto:?subject={{ product.title | url_encode }}&body={{ share_link | url_encode }}" class="share-email" title="{{ 'general.social.share_by_email' | t }}">
          <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-email" viewBox="0 0 24 24">
            <path fill="currentColor" d="M22,5H2C0.9,5,0,5.9,0,7v10c0,1.1,0.9,2,2,2h20c1.1,0,2-0.9,2-2V7C24,5.9,23.1,5,22,5z M22,17H2V7l10,5l10-5V17z M12,11.5L2,6.5h20L12,11.5z"/>
          </svg>
          <span class="share-title">Email</span>
        </a>
      </div>
      
      <div class="field">
        <span id="ShareMessage-{{ section.id }}" class="share-button__message hidden" role="status"> </span>
        <input
          type="text"
          class="field__input"
          id="ShareUrl-{{ section.id }}"
          value="{{ share_link }}"
          placeholder="{{ 'general.share.share_url' | t }}"
          onclick="this.select();"
          readonly
        >
        <label class="field__label" for="ShareUrl-{{ section.id }}">{{ 'general.share.share_url' | t }}</label>
      </div>
      <button class="share-button__close hidden no-js-hidden">
        {% render 'icon-close' %}
        <span class="visually-hidden">{{ 'general.share.close' | t }}</span>
      </button>
      <button class="share-button__copy no-js-hidden">
        {% render 'icon-clipboard' %}
        <span class="visually-hidden">{{ 'general.share.copy_to_clipboard' | t }}</span>
      </button>
    </div>
  </details>
</share-button>
