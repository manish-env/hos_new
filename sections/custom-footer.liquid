{% comment %}
Mx Custom Footer – two-row, pixel-locked layout
Row 1: Social (L) | Badges (C) | Newsletter (R)
Row 2: 4 menus + 1 rich text column
No blank defaults in schema.
{% endcomment %}

<style>
  /* ---------- Base ---------- */
  .mx-footer{background:#fff;color:#111;border-top:1px solid #e6e6e6;}
  .mx-footer .page-width{max-width:var(--page-width,1200px);margin:0 auto;padding:20px 16px;}

  /* ---------- Row 1 ---------- */
  .mx-top{
    display:grid;
    /* Left + Right are auto; middle track uses 1fr so we can center badges in it */
    grid-template-columns:auto 1fr auto;
    align-items:center;
    gap:24px;
    padding:6px 0 20px 0;
  }

  /* Social (left) */
  .mx-social{display:flex;align-items:center;gap:18px;justify-self:start;}
  .mx-social a{display:inline-flex;width:28px;height:28px;align-items:center;justify-content:center;}
  .mx-social svg{width:22px;height:22px;fill:#111;transition:opacity .2s}
  .mx-social a:hover svg{opacity:.75}

  /* Badges (center) */
  .mx-badges{
    justify-self:center;           /* <- locks whole set to visual center of container */
    display:flex;gap:42px;align-items:center;flex-wrap:nowrap;
    min-height:48px;
  }
  .mx-badge{display:grid;grid-template-columns:40px auto;gap:12px;align-items:center}
  .mx-badge .ico{width:40px;height:40px;display:inline-flex;align-items:center;justify-content:center}
  .mx-badge .t1{font-size:12px;letter-spacing:.06em;text-transform:uppercase;color:#666;line-height:1.2}
  .mx-badge .t2{font-size:14px;font-weight:600;line-height:1.2}

  /* Newsletter (right) */
  .mx-news{justify-self:end;min-width:300px;max-width:360px;width:100%}
  .mx-news form{display:flex;gap:8px}
  .mx-news input[type="email"]{height:40px;padding:0 12px;border:1px solid #d9d9d9;border-radius:2px;flex:1;min-width:0}
  .mx-news button{height:40px;padding:0 14px;border:1px solid #111;background:#111;color:#fff;font-weight:600;border-radius:2px;cursor:pointer}
  .mx-news button:hover{opacity:.92}

  .mx-divider{height:1px;background:#e6e6e6;margin:0}

  /* ---------- Row 2 ---------- */
  .mx-bottom{display:grid;grid-template-columns:repeat(5,1fr);gap:24px;padding:22px 0 8px 0}
  .mx-col h4{font-size:14px;letter-spacing:.06em;text-transform:uppercase;margin:0 0 10px 0}
  .mx-links{display:flex;flex-direction:column;gap:8px}
  .mx-links a{font-size:14px;color:#111;text-decoration:none}
  .mx-links a:hover{text-decoration:underline}
  .mx-col .rte{font-size:14px;color:#111;line-height:1.65}
  .mx-col p{margin:0 0 10px 0}

  /* ---------- Responsiveness ---------- */
  @media (max-width:1200px){
    .mx-badges{gap:28px}
    .mx-news{min-width:260px}
  }
  @media (max-width:980px){
    .mx-top{grid-template-columns:1fr 1fr}     /* stack newsletter under badges but keep two columns */
    .mx-social{grid-column:1/2;justify-self:start}
    .mx-badges{grid-column:1/3;order:2;justify-self:center;margin-top:12px}
    .mx-news{grid-column:2/3;justify-self:end}
  }
  @media (max-width:760px){
    .mx-top{grid-template-columns:1fr}
    .mx-social{justify-self:start}
    .mx-news{justify-self:stretch;max-width:none}
    .mx-badges{justify-content:flex-start;justify-self:start;gap:20px;flex-wrap:wrap}
    .mx-bottom{grid-template-columns:1fr 1fr;gap:20px}
  }
  @media (max-width:460px){
    .mx-badge{grid-template-columns:32px auto}
    .mx-badge .ico{width:32px;height:32px}
  }
</style>

<footer class="mx-footer">
  <div class="page-width">
    <!-- Row 1 -->
    <div class="mx-top">
      <!-- Left: Social -->
      <div class="mx-social" aria-label="Social links">
        {% if section.settings.facebook != blank %}
          <a href="{{ section.settings.facebook | escape }}" target="_blank" rel="noopener" aria-label="Facebook">
            <svg viewBox="0 0 24 24" role="img" aria-hidden="true"><path d="M22 12.07C22 6.48 17.52 2 11.93 2 6.34 2 1.86 6.48 1.86 12.07c0 4.99 3.66 9.12 8.44 9.95v-7.04H7.9v-2.91h2.4V9.41c0-2.37 1.41-3.68 3.57-3.68 1.03 0 2.12.18 2.12.18v2.33h-1.2c-1.18 0-1.55.73-1.55 1.48v1.78h2.64l-.42 2.91h-2.22V22c4.78-.83 8.44-4.96 8.44-9.93z"/></svg>
          </a>
        {% endif %}
        {% if section.settings.blog != blank %}
          <a href="{{ section.settings.blog | escape }}" target="_blank" rel="noopener" aria-label="Blog">
            <svg viewBox="0 0 24 24" role="img" aria-hidden="true"><path d="M4 4h16v2H4V4zm0 4h12v2H4V8zm0 4h16v2H4v-2zm0 4h12v2H4v-2z"/></svg>
          </a>
        {% endif %}
        {% if section.settings.instagram != blank %}
          <a href="{{ section.settings.instagram | escape }}" target="_blank" rel="noopener" aria-label="Instagram">
            <svg viewBox="0 0 24 24" role="img" aria-hidden="true"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm5 3.5a5.5 5.5 0 1 1 0 11.001A5.5 5.5 0 0 1 12 5.5zm6 0a1.2 1.2 0 1 1 0 2.4 1.2 1.2 0 0 1 0-2.4z"/></svg>
          </a>
        {% endif %}
      </div>

      <!-- Center: Badges (exactly middle) -->
      <div class="mx-badges">
        {% assign added = 0 %}
        {% for block in section.blocks %}
          {% if block.type == 'feature' %}
            {% assign added = added | plus: 1 %}
            <div class="mx-badge" {{ block.shopify_attributes }}>
              <div class="ico">
                {% case block.settings.icon %}
                  {% when 'truck' %}
                    <svg viewBox="0 0 24 24" width="40" height="40" aria-hidden="true"><path d="M3 5h11v8h-1.5a3.5 3.5 0 1 0 3.5 3.5h2a3.5 3.5 0 1 0 3.5-3.5H21V9l-3-4h-4V5H3v10h3.5a3.5 3.5 0 1 0 0 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2zm15 4h2.8L21 11h-3V9zM7.5 18.5a1.5 1.5 0 1 1 3.001.001A1.5 1.5 0 0 1 7.5 18.5zm10 0a1.5 1.5 0 1 1 3.001.001A1.5 1.5 0 0 1 17.5 18.5z"/></svg>
                  {% when 'globe' %}
                    <svg viewBox="0 0 24 24" width="40" height="40" aria-hidden="true"><path d="M12 2a10 10 0 1 0 .001 20.001A10 10 0 0 0 12 2zm7.93 9h-3.18a15.7 15.7 0 0 0-1.04-5.07A8.03 8.03 0 0 1 19.93 11zM12 4c.88 0 2.34 1.86 3.04 5H8.96C9.66 5.86 11.12 4 12 4zM4.07 13h3.18c.2 1.72.65 3.45 1.33 4.93A8.03 8.03 0 0 1 4.07 13zm3.18-2H4.07A8.03 8.03 0 0 1 8.58 5.07 15.7 15.7 0 0 0 7.25 11zM12 20c-.88 0-2.34-1.86-3.04-5h6.08C14.34 18.14 12.88 20 12 20zm3.42-2.07c.68-1.48 1.13-3.21 1.33-4.93h3.18a8.03 8.03 0 0 1-4.51 4.93z"/></svg>
                  {% when 'sewing' %}
                    <svg viewBox="0 0 24 24" width="40" height="40" aria-hidden="true"><path d="M4 18h16v2H4v-2zm8-15a5 5 0 0 0 0 10h7a3 3 0 0 0 0-6h-1.18A5.99 5.99 0 0 0 12 3zm-3 5a3 3 0 1 1 6.001.001A3 3 0 0 1 9 8z"/></svg>
                {% endcase %}
              </div>
              <div class="txt">
                {% if block.settings.line1 != blank %}<div class="t1">{{ block.settings.line1 }}</div>{% endif %}
                {% if block.settings.line2 != blank and block.settings.line2 != ' ' %}<div class="t2">{{ block.settings.line2 }}</div>{% endif %}
              </div>
            </div>
            {% if added == 3 %}{% break %}{% endif %}
          {% endif %}
        {% endfor %}
      </div>

      <!-- Right: Newsletter -->
      <div class="mx-news">
        {% form 'customer', id: 'mx-footer-newsletter' %}
          <input type="hidden" name="contact[tags]" value="newsletter">
          <input type="email" name="contact[email]" required placeholder="{{ section.settings.news_placeholder | default: 'Enter your email address' }}">
          <button type="submit">{{ section.settings.news_button | default: 'SUBSCRIBE' }}</button>
        {% endform %}
      </div>
    </div>

    <div class="mx-divider"></div>

    <!-- Row 2 -->
    <div class="mx-bottom">
      {% assign menus_printed = 0 %}
      {% for block in section.blocks %}
        {% if block.type == 'menu' %}
          {% assign menus_printed = menus_printed | plus: 1 %}
          <div class="mx-col" {{ block.shopify_attributes }}>
            {% if block.settings.title != blank %}<h4>{{ block.settings.title }}</h4>{% endif %}
            {% if block.settings.menu != blank %}
              <nav class="mx-links" aria-label="{{ block.settings.title | escape }}">
                {% for link in linklists[block.settings.menu].links %}
                  <a href="{{ link.url | escape }}">{{ link.title }}</a>
                {% endfor %}
              </nav>
            {% endif %}
          </div>
        {% endif %}
        {% if menus_printed == 4 %}{% break %}{% endif %}
      {% endfor %}

      <!-- Right-most text column -->
      <div class="mx-col">
        {% if section.settings.right_title != blank %}<h4>{{ section.settings.right_title }}</h4>{% endif %}
        <div class="rte">{{ section.settings.right_richtext }}</div>
      </div>
    </div>
  </div>
</footer>

{% schema %}
{
  "name": "Mx Custom Footer",
  "class": "section-mx-custom-footer",
  "settings": [
    { "type": "url", "id": "facebook", "label": "Facebook URL" },
    { "type": "url", "id": "blog", "label": "Blog/RSS URL" },
    { "type": "url", "id": "instagram", "label": "Instagram URL" },

    { "type": "text", "id": "news_placeholder", "label": "Newsletter placeholder", "default": "Enter your email address" },
    { "type": "text", "id": "news_button", "label": "Newsletter button label", "default": "SUBSCRIBE" },

    { "type": "text", "id": "right_title", "label": "Right column title", "default": "LIKE A DIVA" },
    { "type": "richtext", "id": "right_richtext", "label": "Right column text", "default": "<p>Copyright © 2025 Like A Diva.<br>All rights reserved.<br>e-Commerce by KOL Limited</p>" }
  ],
  "blocks": [
    {
      "type": "feature",
      "name": "Top feature",
      "settings": [
        { "type": "select", "id": "icon", "label": "Icon", "default": "truck", "options": [
          { "value": "truck", "label": "Truck" },
          { "value": "globe", "label": "Globe" },
          { "value": "sewing", "label": "Sewing" }
        ]},
        { "type": "text", "id": "line1", "label": "Top line (small)", "default": "TRACK ORDER" },
        { "type": "text", "id": "line2", "label": "Bottom line (bold)", "default": " ok" }  /* non-blank default */
      ]
    },
    {
      "type": "menu",
      "name": "Bottom menu",
      "settings": [
        { "type": "text", "id": "title", "label": "Menu title", "default": "SHOPPING" },
        { "type": "link_list", "id": "menu", "label": "Menu" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Mx Custom Footer",
      "blocks": [
        { "type": "feature", "settings": { "icon": "truck", "line1": "TRACK ORDER", "line2": " " } },
        { "type": "feature", "settings": { "icon": "globe", "line1": "INTERNATIONAL", "line2": "DELIVERY" } },
        { "type": "feature", "settings": { "icon": "sewing", "line1": "BOUTIQUE STYLE", "line2": "STITCHING" } },

        { "type": "menu", "settings": { "title": "SHOPPING" } },
        { "type": "menu", "settings": { "title": "COLLECTION" } },
        { "type": "menu", "settings": { "title": "INFORMATION" } },
        { "type": "menu", "settings": { "title": "POLICIES" } }
      ]
    }
  ]
}
{% endschema %}
